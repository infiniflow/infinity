/home/yzq/GitHub/infinity/cmake-build-release/src/test_main --gtest_filter=AnnIVFFlatL2Benchmark.*:AnnIVFFlatL2Benchmark/*.*:AnnIVFFlatL2Benchmark.*/*:*/AnnIVFFlatL2Benchmark.*/*:*/AnnIVFFlatL2Benchmark/*.* --gtest_color=no
Testing started at 3:55 PM ...
max omp threads: 1
max omp threads: 1
[0.000 s] Loading train set
[0.030 s] Training on 100000 vectors
, with 316 centroids
Iteration 0 (0.227029 s, search 0.224008 s): objective=7.01996e+09
imbalance=1.8866686278 nsplit=0

Iteration 1 (0.4398640137 s, search 0.4340898437 s): objective=4832458240.0000000000
imbalance=1.4042875073 nsplit=0

Iteration 2 (0.6518759766 s, search 0.6422797852 s): objective=4692111872.0000000000
imbalance=1.2751057299 nsplit=0

Iteration 3 (0.8762270508 s, search 0.8640139160 s): objective=4635888640.0000000000
imbalance=1.2154402914 nsplit=0

Iteration 4 (1.0917180176 s, search 1.0767707520 s): objective=4605288448.0000000000
imbalance=1.1815772721 nsplit=0

Iteration 5 (1.3034409180 s, search 1.2857187500 s): objective=4586368512.0000000000
imbalance=1.1635633058 nsplit=0

Iteration 6 (1.5135490723 s, search 1.4929445801 s): objective=4572917760.0000000000
imbalance=1.1517790782 nsplit=0

Iteration 7 (1.7245368652 s, search 1.7012026367 s): objective=4562852864.0000000000
imbalance=1.1431981340 nsplit=0

Iteration 8 (1.9362199707 s, search 1.9092536621 s): objective=4554764800.0000000000
imbalance=1.1362916005 nsplit=0

Iteration 9 (2.1579638672 s, search 2.1279658203 s): objective=4548557312.0000000000
imbalance=1.1302386900 nsplit=0
[2.220 s] Loading database
[2.487 s] Indexing database, size 1000000*128
[5.400 s] Loading queries
[5.401 s] Loading ground truth for 10000 queries
[5.405 s] Perform a search on 10000 queries
############################
[6.513 s] Compute recalls
############################
############################
n_1: 5290
n_10: 47678
n_100: 405400
############################
R@1 = 0.5290
R@10 = 0.4768
R@100 = 0.4054
##########################################################
Hello ?
##########################################################
[0.000 s] Loading train set
[0.011 s] Loading database
[0.137 s] Training and Indexing on 100000 vectors
, with 316 centroids

[0.000 s] k-means training begin.
warning : too many vectors, more than max_points_per_centroid (256) * partition_num (316) = 80896 vectors to train
warning : will randomly choose max_points_per_centroid (256) * partition_num (316) = 80896 vectors to train

[0.011 s] training data prepared.
[0.011 s] time for preparing training data: 0.011 s

[0.011 s] centroids initialized.
[0.011 s] time for initializing centroids: 0.000 s

[0.011 s] iteration begin: 1

[0.091 s] training data partitioned.
[0.091 s] time for partitioning training data: 0.080 s

[0.091 s] sum of partition_element_count: 80896

[0.094 s] centroids updated.
[0.094 s] time for updating centroids: 0.003 s
[0.094 s] 
imbalance factor: 1.9862986697
[0.094 s] Iteration 1 (0.08 s, search 0.08 s): objective=7098389504.00
imbalance=1.9862987 nsplit=0

[0.094 s] iteration begin: 2

[0.171 s] training data partitioned.
[0.171 s] time for partitioning training data: 0.077 s

[0.171 s] sum of partition_element_count: 80896

[0.173 s] centroids updated.
[0.173 s] time for updating centroids: 0.002 s
[0.173 s] 
imbalance factor: 1.3802632199
[0.173 s] Iteration 2 (0.08 s, search 0.08 s): objective=4838107648.00
imbalance=1.3802632 nsplit=0

[0.173 s] iteration begin: 3

[0.249 s] training data partitioned.
[0.249 s] time for partitioning training data: 0.077 s

[0.249 s] sum of partition_element_count: 80896

[0.252 s] centroids updated.
[0.252 s] time for updating centroids: 0.003 s
[0.252 s] 
imbalance factor: 1.2412353709
[0.252 s] Iteration 3 (0.08 s, search 0.08 s): objective=4694571008.00
imbalance=1.2412354 nsplit=0

[0.252 s] iteration begin: 4

[0.331 s] training data partitioned.
[0.331 s] time for partitioning training data: 0.078 s

[0.331 s] sum of partition_element_count: 80896

[0.333 s] centroids updated.
[0.333 s] time for updating centroids: 0.002 s
[0.333 s] 
imbalance factor: 1.1835205464
[0.333 s] Iteration 4 (0.08 s, search 0.08 s): objective=4636116480.00
imbalance=1.1835205 nsplit=0

[0.333 s] iteration begin: 5

[0.409 s] training data partitioned.
[0.409 s] time for partitioning training data: 0.076 s

[0.409 s] sum of partition_element_count: 80896

[0.411 s] centroids updated.
[0.411 s] time for updating centroids: 0.002 s
[0.411 s] 
imbalance factor: 1.1528964465
[0.411 s] Iteration 5 (0.08 s, search 0.08 s): objective=4604755968.00
imbalance=1.1528964 nsplit=0

[0.411 s] iteration begin: 6

[0.487 s] training data partitioned.
[0.487 s] time for partitioning training data: 0.077 s

[0.487 s] sum of partition_element_count: 80896

[0.491 s] centroids updated.
[0.491 s] time for updating centroids: 0.003 s
[0.491 s] 
imbalance factor: 1.1344367884
[0.491 s] Iteration 6 (0.08 s, search 0.08 s): objective=4585566720.00
imbalance=1.1344368 nsplit=0

[0.491 s] iteration begin: 7

[0.569 s] training data partitioned.
[0.569 s] time for partitioning training data: 0.078 s

[0.569 s] sum of partition_element_count: 80896

[0.571 s] centroids updated.
[0.571 s] time for updating centroids: 0.002 s
[0.571 s] 
imbalance factor: 1.1242194840
[0.571 s] Iteration 7 (0.08 s, search 0.08 s): objective=4572713984.00
imbalance=1.1242195 nsplit=0

[0.571 s] iteration begin: 8

[0.646 s] training data partitioned.
[0.646 s] time for partitioning training data: 0.075 s

[0.646 s] sum of partition_element_count: 80896

[0.649 s] centroids updated.
[0.649 s] time for updating centroids: 0.002 s
[0.649 s] 
imbalance factor: 1.1173228010
[0.649 s] Iteration 8 (0.08 s, search 0.08 s): objective=4563425792.00
imbalance=1.1173228 nsplit=0

[0.649 s] iteration begin: 9

[0.726 s] training data partitioned.
[0.726 s] time for partitioning training data: 0.077 s

[0.726 s] sum of partition_element_count: 80896

[0.729 s] centroids updated.
[0.729 s] time for updating centroids: 0.003 s
[0.729 s] 
imbalance factor: 1.1131514537
[0.729 s] Iteration 9 (0.08 s, search 0.08 s): objective=4556296704.00
imbalance=1.1131515 nsplit=0

[0.729 s] iteration begin: 10

[0.807 s] training data partitioned.
[0.807 s] time for partitioning training data: 0.078 s

[0.807 s] sum of partition_element_count: 80896

[0.809 s] centroids updated.
[0.809 s] time for updating centroids: 0.002 s
[0.809 s] 
imbalance factor: 1.1096505274
[0.809 s] Iteration 10 (0.08 s, search 0.08 s): objective=4550655488.00
imbalance=1.1096505 nsplit=0

##################################################
[0.000 s] input vectors classification begin.
##################################################

##################################################
[0.937 s] input vectors classification finished.
##################################################

##################################################
[1.051 s] input vectors insertion finished.
##################################################

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
88 contain 567736: 0

286 contain 567736: 0
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

[1.998 s] Loading queries
[1.999 s] Loading ground truth for 10000 queries
[2.000 s] Perform a search on 10000 queries
############################
############################
[6.139 s] Compute recalls
############################
############################
n_1: 5292
n_10: 48120
n_100: 404635
############################
R@1 = 0.5292
R@10 = 0.4812
R@100 = 0.4046

######################################

############################
D1 and D2 difference:
D1[0 : 1]: 67010.000 D2[0 : 1]: 68247.000	difference: -1237.000
D1[0 : 2]: 68247.000 D2[0 : 2]: 69844.000	difference: -1597.000
D1[0 : 4]: 73537.000 D2[0 : 4]: 71861.000	difference: 1676.000
D1[0 : 5]: 73581.000 D2[0 : 5]: 73537.000	difference: 44.000
D1[0 : 6]: 74356.000 D2[0 : 6]: 74016.000	difference: 340.000
D1[0 : 9]: 75634.000 D2[0 : 9]: 75704.000	difference: -70.000
D1[0 : 12]: 80639.000 D2[0 : 12]: 80543.000	difference: 96.000
D1[0 : 13]: 80749.000 D2[0 : 13]: 81399.000	difference: -650.000
D1[0 : 14]: 81399.000 D2[0 : 14]: 81417.000	difference: -18.000
D1[0 : 16]: 82210.000 D2[0 : 16]: 81909.000	difference: 301.000
############################
I1 and I2 difference:
I1[0 : 1]: 695756 I2[0 : 1]: 435345
I1[0 : 2]: 435345 I2[0 : 2]: 701258
I1[0 : 4]: 562594 I2[0 : 4]: 872728
I1[0 : 5]: 908244 I2[0 : 5]: 562594
I1[0 : 6]: 619660 I2[0 : 6]: 893601
I1[0 : 9]: 565419 I2[0 : 9]: 236647
I1[0 : 12]: 225116 I2[0 : 12]: 478814
I1[0 : 13]: 391655 I2[0 : 13]: 957845
I1[0 : 14]: 957845 I2[0 : 14]: 791852
I1[0 : 16]: 486457 I2[0 : 16]: 180955
############################
############################
D1 and D2 difference:
D1[5001 : 1]: 7877.000 D2[5001 : 1]: 11786.000	difference: -3909.000
D1[5001 : 2]: 11237.000 D2[5001 : 2]: 12760.000	difference: -1523.000
D1[5001 : 3]: 11786.000 D2[5001 : 3]: 13441.000	difference: -1655.000
D1[5001 : 4]: 12710.000 D2[5001 : 4]: 13618.000	difference: -908.000
D1[5001 : 5]: 12760.000 D2[5001 : 5]: 14355.000	difference: -1595.000
D1[5001 : 6]: 13320.000 D2[5001 : 6]: 14505.000	difference: -1185.000
D1[5001 : 7]: 13441.000 D2[5001 : 7]: 14861.000	difference: -1420.000
D1[5001 : 8]: 13618.000 D2[5001 : 8]: 14974.000	difference: -1356.000
D1[5001 : 9]: 14355.000 D2[5001 : 9]: 15396.000	difference: -1041.000
D1[5001 : 10]: 14369.000 D2[5001 : 10]: 15520.000	difference: -1151.000
############################
I1 and I2 difference:
I1[5001 : 1]: 827664 I2[5001 : 1]: 873393
I1[5001 : 2]: 851392 I2[5001 : 2]: 852358
I1[5001 : 3]: 873393 I2[5001 : 3]: 52547
I1[5001 : 4]: 980767 I2[5001 : 4]: 771389
I1[5001 : 5]: 852358 I2[5001 : 5]: 849866
I1[5001 : 6]: 423931 I2[5001 : 6]: 823567
I1[5001 : 7]: 52547 I2[5001 : 7]: 823618
I1[5001 : 8]: 771389 I2[5001 : 8]: 768937
I1[5001 : 9]: 849866 I2[5001 : 9]: 424826
I1[5001 : 10]: 794215 I2[5001 : 10]: 57740
############################
Process finished with exit code 0


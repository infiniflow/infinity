/home/yzq/GitHub/infinity/cmake-build-debug/src/test_main --gtest_filter=AnnIVFFlatL2Benchmark.*:AnnIVFFlatL2Benchmark/*.*:AnnIVFFlatL2Benchmark.*/*:*/AnnIVFFlatL2Benchmark.*/*:*/AnnIVFFlatL2Benchmark/*.* --gtest_color=no
Testing started at 11:51 AM ...
max omp threads: 1
max omp threads: 1
[0.000 s] Loading train set
[0.028 s] Training on 100000 vectors
, with 316 centroids
perm:
69775 70546 90246 94746 1524 32024 91830 97549 38599 81250 93433 52022 47466 42446 96993 23397 35740 22739 79346 2992 

Iteration 0 (0.291481 s, search 0.27968 s): objective=7.0652e+09
imbalance=1.6954979233 nsplit=0
[0.361 s] Loading database
[0.592 s] Indexing database, size 1000000*128
#####################################################
faiss coarse_idx of 567736:
286
#####################################################


i: 567736, assigned centroid: 286

286 contain 567736: 1
#####################################################
faiss nearest_centroids of 567736 (float):
88 28965.8105468750
286 28965.8750000000
#####################################################

[4.363 s] Loading queries
[4.364 s] Loading ground truth for 10000 queries
[4.369 s] Perform a search on 10000 queries

i: 1472, selected_centroid: 88

88 contain 567736: 0

286 contain 567736: 1
############################
[15.930 s] Compute recalls
############################
############################
n_1: 5015
n_10: 44948
n_100: 377015
############################
R@1 = 0.5015
R@10 = 0.4495
R@100 = 0.3770
Hello ?
[0.000 s] Loading train set
[0.011 s] Loading database
[0.161 s] Training and Indexing on 100000 vectors
, with 316 centroids

[0.000 s] k-means training begin.
warning : too many vectors, more than max_points_per_centroid (256) * partition_num (316) = 80896 vectors to train
warning : will randomly choose max_points_per_centroid (256) * partition_num (316) = 80896 vectors to train

[0.017 s] training data prepared.
[0.017 s] time for preparing training data: 0.017 s

[0.017 s] centroids initialized.
[0.017 s] time for initializing centroids: 0.000 s

[0.017 s] iteration begin: 1

[0.161 s] training data partitioned.
[0.161 s] time for partitioning training data: 0.144 s

[0.161 s] sum of partition_element_count: 80896

[0.175 s] centroids updated.
[0.175 s] time for updating centroids: 0.014 s
######################################################

[0.175 s] max of partition_element_count: 1416
[0.175 s] min of partition_element_count: 12

[0.175 s] 
imbalance factor: 1.7104041184
[0.175 s] Iteration 1 (0.16 s, search 0.14 s): objective=7023151616.00
imbalance=1.7104041 nsplit=0

##################################################
[0.000 s] input vectors classification begin.
##################################################

##################################################
[1.747 s] input vectors classification finished.
##################################################

##################################################
[1.970 s] input vectors insertion finished.
##################################################

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
88 contain 567736: 1

286 contain 567736: 0
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

[2.307 s] Loading queries
[2.308 s] Loading ground truth for 10000 queries
[2.311 s] Perform a search on 10000 queries
############################
############################
D1 and D2 difference:
D1[0 : 0]: 59531.000 D2[0 : 0]: 55091.000	difference: 4440.000
D1[0 : 1]: 65697.000 D2[0 : 1]: 67010.000	difference: -1313.000
D1[0 : 2]: 73344.000 D2[0 : 2]: 68247.000	difference: 5097.000
D1[0 : 3]: 73793.000 D2[0 : 3]: 71441.000	difference: 2352.000
D1[0 : 4]: 75124.000 D2[0 : 4]: 71861.000	difference: 3263.000
D1[0 : 5]: 75704.000 D2[0 : 5]: 73537.000	difference: 2167.000
D1[0 : 6]: 75944.000 D2[0 : 6]: 73581.000	difference: 2363.000
D1[0 : 7]: 76583.000 D2[0 : 7]: 73793.000	difference: 2790.000
D1[0 : 8]: 76645.000 D2[0 : 8]: 74356.000	difference: 2289.000
D1[0 : 9]: 77588.000 D2[0 : 9]: 75124.000	difference: 2464.000
############################
I1 and I2 difference:
I1[0 : 0]: 561813 I2[0 : 0]: 934876
I1[0 : 1]: 706771 I2[0 : 1]: 695756
I1[0 : 2]: 36538 I2[0 : 2]: 435345
I1[0 : 3]: 600499 I2[0 : 3]: 455537
I1[0 : 4]: 562167 I2[0 : 4]: 872728
I1[0 : 5]: 236647 I2[0 : 5]: 562594
I1[0 : 6]: 568573 I2[0 : 6]: 908244
I1[0 : 7]: 36267 I2[0 : 7]: 600499
I1[0 : 8]: 931632 I2[0 : 8]: 619660
I1[0 : 9]: 843384 I2[0 : 9]: 562167
############################
############################
vacant_1: 0
vacant_10: 0
vacant_100: 0
nq: 10000
############################
vacant@1 = 0.0000
vacant@10 = 0.0000
vacant@100 = 0.0000
############################
[15.407 s] Compute recalls
############################
############################
n_1: 5096
n_10: 44980
n_100: 377839
############################
R@1 = 0.5096
R@10 = 0.4498
R@100 = 0.3778
Process finished with exit code 0


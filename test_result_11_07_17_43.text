/home/yzq/GitHub/infinity/cmake-build-release/src/test_main --gtest_filter=AnnIVFFlatL2Benchmark.*:AnnIVFFlatL2Benchmark/*.*:AnnIVFFlatL2Benchmark.*/*:*/AnnIVFFlatL2Benchmark.*/*:*/AnnIVFFlatL2Benchmark/*.* --gtest_color=no
Testing started at 5:41 PM ...
max omp threads: 1
max omp threads: 1
[0.000 s] Loading train set
[0.029 s] Training on 100000 vectors
, with 316 centroids
Iteration 0 (0.215342 s, search 0.212154 s): objective=7.01996e+09
imbalance=1.8866686278 nsplit=0

Iteration 1 (0.4277229004 s, search 0.4217800293 s): objective=4832458240.0000000000
imbalance=1.4042875073 nsplit=0

Iteration 2 (0.6376550293 s, search 0.6286770020 s): objective=4692111872.0000000000
imbalance=1.2751057299 nsplit=0

Iteration 3 (0.8587578125 s, search 0.8459809570 s): objective=4635888640.0000000000
imbalance=1.2154402914 nsplit=0

Iteration 4 (1.0791699219 s, search 1.0628161621 s): objective=4605288448.0000000000
imbalance=1.1815772721 nsplit=0

Iteration 5 (1.2921628418 s, search 1.2729272461 s): objective=4586368512.0000000000
imbalance=1.1635633058 nsplit=0

Iteration 6 (1.5011259766 s, search 1.4794433594 s): objective=4572917760.0000000000
imbalance=1.1517790782 nsplit=0

Iteration 7 (1.7112500000 s, search 1.6867802734 s): objective=4562852864.0000000000
imbalance=1.1431981340 nsplit=0

Iteration 8 (1.9203430176 s, search 1.8931894531 s): objective=4554764800.0000000000
imbalance=1.1362916005 nsplit=0

Iteration 9 (2.1300000000 s, search 2.1001943359 s): objective=4548557312.0000000000
imbalance=1.1302386900 nsplit=0
[2.186 s] Loading database
[2.413 s] Indexing database, size 1000000*128
[5.266 s] Loading queries
[5.268 s] Loading ground truth for 10000 queries
[5.272 s] Perform a search on 10000 queries
############################
[8.649 s] Compute recalls
############################
############################
n_1: 7913
n_10: 75240
n_100: 679108
############################
R@1 = 0.7913
R@10 = 0.7524
R@100 = 0.6791
##########################################################
Hello ?
##########################################################
[0.000 s] Loading train set
[0.012 s] Loading database
[0.150 s] Training and Indexing on 100000 vectors
, with 316 centroids

[0.000 s] k-means training begin.
warning : too many vectors, more than max_points_per_centroid (256) * partition_num (316) = 80896 vectors to train
warning : will randomly choose max_points_per_centroid (256) * partition_num (316) = 80896 vectors to train

[0.011 s] training data prepared.
[0.011 s] time for preparing training data: 0.011 s

[0.011 s] centroids initialized.
[0.011 s] time for initializing centroids: 0.000 s

[0.011 s] iteration begin: 1

[0.094 s] training data partitioned.
[0.094 s] time for partitioning training data: 0.083 s

[0.094 s] sum of partition_element_count: 80896

[0.097 s] centroids updated.
[0.097 s] time for updating centroids: 0.003 s
[0.097 s] 
imbalance factor: 1.7539758803
[0.097 s] Iteration 1 (0.09 s, search 0.08 s): objective=7088257536.00
imbalance=1.7539759 nsplit=0

[0.097 s] iteration begin: 2

[0.174 s] training data partitioned.
[0.174 s] time for partitioning training data: 0.077 s

[0.174 s] sum of partition_element_count: 80896

[0.176 s] centroids updated.
[0.176 s] time for updating centroids: 0.002 s
[0.176 s] 
imbalance factor: 1.3206655768
[0.176 s] Iteration 2 (0.08 s, search 0.08 s): objective=4820278272.00
imbalance=1.3206656 nsplit=0

[0.176 s] iteration begin: 3

[0.253 s] training data partitioned.
[0.253 s] time for partitioning training data: 0.077 s

[0.253 s] sum of partition_element_count: 80896

[0.255 s] centroids updated.
[0.255 s] time for updating centroids: 0.002 s
[0.255 s] 
imbalance factor: 1.2193651803
[0.255 s] Iteration 3 (0.08 s, search 0.08 s): objective=4679011840.00
imbalance=1.2193652 nsplit=0

[0.255 s] iteration begin: 4

[0.333 s] training data partitioned.
[0.333 s] time for partitioning training data: 0.078 s

[0.333 s] sum of partition_element_count: 80896

[0.335 s] centroids updated.
[0.335 s] time for updating centroids: 0.002 s
[0.335 s] 
imbalance factor: 1.1779382440
[0.335 s] Iteration 4 (0.08 s, search 0.08 s): objective=4626110976.00
imbalance=1.1779382 nsplit=0

[0.335 s] iteration begin: 5

[0.411 s] training data partitioned.
[0.411 s] time for partitioning training data: 0.076 s

[0.411 s] sum of partition_element_count: 80896

[0.413 s] centroids updated.
[0.413 s] time for updating centroids: 0.002 s
[0.413 s] 
imbalance factor: 1.1576351697
[0.413 s] Iteration 5 (0.08 s, search 0.08 s): objective=4597639168.00
imbalance=1.1576352 nsplit=0

[0.413 s] iteration begin: 6

[0.490 s] training data partitioned.
[0.490 s] time for partitioning training data: 0.076 s

[0.490 s] sum of partition_element_count: 80896

[0.492 s] centroids updated.
[0.492 s] time for updating centroids: 0.003 s
[0.492 s] 
imbalance factor: 1.1459056999
[0.492 s] Iteration 6 (0.08 s, search 0.08 s): objective=4580183552.00
imbalance=1.1459057 nsplit=0

[0.492 s] iteration begin: 7

[0.570 s] training data partitioned.
[0.570 s] time for partitioning training data: 0.078 s

[0.570 s] sum of partition_element_count: 80896

[0.572 s] centroids updated.
[0.573 s] time for updating centroids: 0.003 s
[0.573 s] 
imbalance factor: 1.1371695603
[0.573 s] Iteration 7 (0.08 s, search 0.08 s): objective=4568340480.00
imbalance=1.1371696 nsplit=0

[0.573 s] iteration begin: 8

[0.651 s] training data partitioned.
[0.651 s] time for partitioning training data: 0.078 s

[0.651 s] sum of partition_element_count: 80896

[0.653 s] centroids updated.
[0.653 s] time for updating centroids: 0.003 s
[0.653 s] 
imbalance factor: 1.1302064340
[0.653 s] Iteration 8 (0.08 s, search 0.08 s): objective=4559548416.00
imbalance=1.1302064 nsplit=0

[0.653 s] iteration begin: 9

[0.731 s] training data partitioned.
[0.731 s] time for partitioning training data: 0.077 s

[0.731 s] sum of partition_element_count: 80896

[0.733 s] centroids updated.
[0.733 s] time for updating centroids: 0.003 s
[0.733 s] 
imbalance factor: 1.1252030964
[0.733 s] Iteration 9 (0.08 s, search 0.08 s): objective=4552788480.00
imbalance=1.1252031 nsplit=0

[0.733 s] iteration begin: 10

[0.811 s] training data partitioned.
[0.811 s] time for partitioning training data: 0.078 s

[0.811 s] sum of partition_element_count: 80896

[0.814 s] centroids updated.
[0.814 s] time for updating centroids: 0.002 s
[0.814 s] 
imbalance factor: 1.1210859275
[0.814 s] Iteration 10 (0.08 s, search 0.08 s): objective=4547359232.00
imbalance=1.1210859 nsplit=0

##################################################
[0.000 s] input vectors classification begin.
##################################################

##################################################
[0.963 s] input vectors classification finished.
##################################################

##################################################
[1.103 s] input vectors insertion finished.
##################################################

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
88 contain 567736: 0

286 contain 567736: 0
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

[2.067 s] Loading queries
[2.068 s] Loading ground truth for 10000 queries
[2.070 s] Perform a search on 10000 queries
############################
############################
[14.068 s] Compute recalls
############################
############################
n_1: 7974
n_10: 75485
n_100: 680778
############################
R@1 = 0.7974
R@10 = 0.7548
R@100 = 0.6808

######################################

############################
D1 and D2 difference:
D1 found result which is not in D2: D1[0 : 1]: 55091.000 D2[0 : 1]: 59531.000 difference: -4440.000
D1 found result which is not in D2: D1[0 : 5]: 67010.000 D2[0 : 4]: 69844.000 difference: -2834.000
D1 found result which is not in D2: D1[0 : 6]: 68247.000 D2[0 : 4]: 69844.000 difference: -1597.000
D1 found result which is not in D2: D1[0 : 11]: 73537.000 D2[0 : 8]: 74016.000 difference: -479.000
D1 found result which is not in D2: D1[0 : 12]: 73581.000 D2[0 : 8]: 74016.000 difference: -435.000
D2 found result which is not in D1: D1[0 : 13]: 74356.000 D2[0 : 8]: 74016.000 difference: 340.000
D1 found result which is not in D2: D1[0 : 14]: 75124.000 D2[0 : 10]: 75634.000 difference: -510.000
D1 found result which is not in D2: D1[0 : 15]: 75554.000 D2[0 : 10]: 75634.000 difference: -80.000
D1 found result which is not in D2: D1[0 : 19]: 76051.000 D2[0 : 13]: 76583.000 difference: -532.000
D2 found result which is not in D1: D1[0 : 24]: 77588.000 D2[0 : 17]: 77587.000 difference: 1.000
D1 found result which is not in D2: D1[0 : 25]: 77917.000 D2[0 : 19]: 78092.000 difference: -175.000
D2 found result which is not in D1: D1[0 : 28]: 78889.000 D2[0 : 21]: 78655.000 difference: 234.000
D1 found result which is not in D2: D1[0 : 30]: 79223.000 D2[0 : 24]: 79874.000 difference: -651.000
D1 found result which is not in D2: D1[0 : 31]: 79309.000 D2[0 : 24]: 79874.000 difference: -565.000
D1 found result which is not in D2: D1[0 : 32]: 79702.000 D2[0 : 24]: 79874.000 difference: -172.000
D1 found result which is not in D2: D1[0 : 34]: 80246.000 D2[0 : 25]: 80499.000 difference: -253.000
D1 found result which is not in D2: D1[0 : 35]: 80450.000 D2[0 : 25]: 80499.000 difference: -49.000
D1 found result which is not in D2: D1[0 : 37]: 80543.000 D2[0 : 26]: 80761.000 difference: -218.000
D1 found result which is not in D2: D1[0 : 38]: 80639.000 D2[0 : 26]: 80761.000 difference: -122.000
D1 found result which is not in D2: D1[0 : 39]: 80749.000 D2[0 : 26]: 80761.000 difference: -12.000
D2 found result which is not in D1: D1[0 : 40]: 80995.000 D2[0 : 26]: 80761.000 difference: 234.000
D1 found result which is not in D2: D1[0 : 40]: 80995.000 D2[0 : 27]: 81069.000 difference: -74.000
D1 found result which is not in D2: D1[0 : 42]: 81093.000 D2[0 : 28]: 81148.000 difference: -55.000
D2 found result which is not in D1: D1[0 : 43]: 81399.000 D2[0 : 28]: 81148.000 difference: 251.000
D1 found result which is not in D2: D1[0 : 45]: 81831.000 D2[0 : 31]: 81969.000 difference: -138.000
D1 found result which is not in D2: D1[0 : 46]: 81883.000 D2[0 : 31]: 81969.000 difference: -86.000
D1 found result which is not in D2: D1[0 : 47]: 81909.000 D2[0 : 31]: 81969.000 difference: -60.000
D2 found result which is not in D1: D1[0 : 49]: 82121.000 D2[0 : 32]: 81999.000 difference: 122.000
D1 found result which is not in D2: D1[0 : 49]: 82121.000 D2[0 : 33]: 82210.000 difference: -89.000
D1 found result which is not in D2: D1[0 : 50]: 82175.000 D2[0 : 33]: 82210.000 difference: -35.000
D1 found result which is not in D2: D1[0 : 51]: 82181.000 D2[0 : 33]: 82210.000 difference: -29.000
D1 found result which is not in D2: D1[0 : 54]: 82455.000 D2[0 : 35]: 82505.000 difference: -50.000
D2 found result which is not in D1: D1[0 : 55]: 82537.000 D2[0 : 35]: 82505.000 difference: 32.000
D1 found result which is not in D2: D1[0 : 55]: 82537.000 D2[0 : 36]: 82603.000 difference: -66.000
D1 found result which is not in D2: D1[0 : 61]: 82802.000 D2[0 : 41]: 82847.000 difference: -45.000
D2 found result which is not in D1: D1[0 : 62]: 82937.000 D2[0 : 41]: 82847.000 difference: 90.000
D1 found result which is not in D2: D1[0 : 64]: 83031.000 D2[0 : 44]: 83079.000 difference: -48.000
D2 found result which is not in D1: D1[0 : 65]: 83176.000 D2[0 : 44]: 83079.000 difference: 97.000
D1 found result which is not in D2: D1[0 : 65]: 83176.000 D2[0 : 45]: 83217.000 difference: -41.000
D1 found result which is not in D2: D1[0 : 67]: 83313.000 D2[0 : 46]: 83341.000 difference: -28.000
D2 found result which is not in D1: D1[0 : 69]: 83466.000 D2[0 : 47]: 83415.000 difference: 51.000
D2 found result which is not in D1: D1[0 : 70]: 83576.000 D2[0 : 49]: 83482.000 difference: 94.000
D1 found result which is not in D2: D1[0 : 70]: 83576.000 D2[0 : 50]: 83582.000 difference: -6.000
D2 found result which is not in D1: D1[0 : 71]: 83604.000 D2[0 : 50]: 83582.000 difference: 22.000
D2 found result which is not in D1: D1[0 : 71]: 83604.000 D2[0 : 51]: 83600.000 difference: 4.000
D1 found result which is not in D2: D1[0 : 72]: 83646.000 D2[0 : 53]: 83764.000 difference: -118.000
D2 found result which is not in D1: D1[0 : 73]: 83875.000 D2[0 : 53]: 83764.000 difference: 111.000
D2 found result which is not in D1: D1[0 : 78]: 84175.000 D2[0 : 59]: 84080.000 difference: 95.000
D1 found result which is not in D2: D1[0 : 78]: 84175.000 D2[0 : 60]: 84247.000 difference: -72.000
D1 found result which is not in D2: D1[0 : 80]: 84504.000 D2[0 : 61]: 84829.000 difference: -325.000
############################
Process finished with exit code 0


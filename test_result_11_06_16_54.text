/home/yzq/GitHub/infinity/cmake-build-debug/src/test_main --gtest_filter=AnnIVFFlatL2Benchmark.*:AnnIVFFlatL2Benchmark/*.*:AnnIVFFlatL2Benchmark.*/*:*/AnnIVFFlatL2Benchmark.*/*:*/AnnIVFFlatL2Benchmark/*.* --gtest_color=no
Testing started at 4:54 PM ...
max omp threads: 1
max omp threads: 1
[0.000 s] Loading train set
[0.039 s] Training on 100000 vectors
, with 316 centroids
perm:
69775 70546 90246 94746 1524 32024 91830 97549 38599 81250 93433 52022 47466 42446 96993 23397 35740 22739 79346 2992 

Iteration 0 (0.297339 s, search 0.285301 s): objective=7.0652e+09
imbalance=1.6954979233 nsplit=0
[0.384 s] Loading database
[0.641 s] Indexing database, size 1000000*128
#####################################################
faiss coarse_idx of 567736:
286
#####################################################


i: 567736, assigned centroid: 286

286 contain 567736: 1
#####################################################
faiss nearest_centroids of 567736 (float):
88 28965.8105468750
286 28965.8750000000
#####################################################

[4.500 s] Loading queries
[4.501 s] Loading ground truth for 10000 queries
[4.505 s] Perform a search on 10000 queries

i: 1472, selected_centroid: 88

88 contain 567736: 0

286 contain 567736: 1
############################
[16.111 s] Compute recalls
############################
############################
n_1: 5015
n_10: 44948
n_100: 377015
############################
R@1 = 0.5015
R@10 = 0.4495
R@100 = 0.3770
Hello ?
[0.000 s] Loading train set
[0.011 s] Loading database
[0.134 s] Training and Indexing on 100000 vectors
, with 316 centroids

[0.000 s] k-means training begin.
[0.000 s] warning : too many vectors, more than max_points_per_centroid (256) * partition_num (316)
[0.000 s] warning : will randomly choose max_points_per_centroid (256) * partition_num (316) = 80896 vectors to train
random_ids nums: 80896
69775 70546 90246 94746 1524 32024 91830 97549 38599 81250 93433 52022 47466 42446 96993 23397 35740 22739 79346 2992 
dimension: 128
training_data_num: 80896
dimension * training_data_num: 10354688

[0.016 s] random training vectors generated.

[0.016 s] centroids initialized.

[0.017 s] 
iteration count: 1
[7.414 s] sum of partition_element_count: 80896
[7.428 s] 
imbalance factor: 1.6954979233
[7.428 s] Iteration 1 (7.41 s, search 7.40 s): objective=7065198592.00
imbalance=1.6954979233 nsplit=0
#####################################################
nearest_centroids (double):
88 28965.8152236932
286 28965.8787573621
#####################################################


##################################################
[0.000 s] input vectors classification begin.
##################################################
#####################################################[1.746 s] 
assigned_partition_id of 567736:	286
#####################################################


##################################################
[1.750 s] input vectors classification finished.
##################################################

##################################################
[1.979 s] input vectors insertion finished.
##################################################

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
88 contain 567736: 0

286 contain 567736: 1
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

############################
c1 and c2 difference:
############################
[9.542 s] Loading queries
[9.544 s] Loading ground truth for 10000 queries
[9.545 s] Perform a search on 10000 queries

i: 0 contain_nums: 3622

i: 1 contain_nums: 2843

i: 2 contain_nums: 6853

i: 3 contain_nums: 8394

i: 4 contain_nums: 4942

i: 5 contain_nums: 2090

i: 6 contain_nums: 2959

i: 7 contain_nums: 9831

i: 8 contain_nums: 5230

i: 9 contain_nums: 3145

i: 1472, selected_centroid: 88

contain 567736: 0

counter_1: 0, counter_10: 0, counter_100: 0

float percentage:
counter_1: 0.000, counter_10: 0.000, counter_100: 0.000
############################
############################
D1 and D2 difference:
############################
I1 and I2 difference:
############################
############################
vacant_1: 0
vacant_10: 0
vacant_100: 0
nq: 10000
############################
vacant@1 = 0.0000
vacant@10 = 0.0000
vacant@100 = 0.0000
############################
[23.334 s] Compute recalls
############################
############################
n_1: 5015
n_10: 44948
n_100: 377015
############################
R@1 = 0.5015
R@10 = 0.4495
R@100 = 0.3770
Process finished with exit code 0

